{"version":3,"sources":["./src/app/Module/my-tickets/my-tickets-routing.module.ts","./src/app/component/my-tickets/my-tickets.component.ts","./src/app/component/my-tickets/my-tickets.component.html","./src/app/Module/my-tickets/my-tickets.module.ts"],"names":[],"mappings":"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","file":"my-tickets-my-tickets-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { MyTicketsComponent } from '../../component/my-tickets/my-tickets.component';\nconst routes: Routes = [{ path: '', component: MyTicketsComponent }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MyTicketsRoutingModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\nimport { CustomFieldsService } from 'src/app/service/custom-fields.service';\nimport { TicketService } from 'src/app/service/ticket.service';\n\n@Component({\n  selector: 'app-my-tickets',\n  templateUrl: './my-tickets.component.html',\n  styleUrls: ['./my-tickets.component.scss'],\n})\nexport class MyTicketsComponent implements OnInit {\n  spinner: boolean = false;\n  ticket_list: any[] = [];\n  type: string;\n  items: any = [{ label: 'Actions', items: [] }];\n  feilds: any[] = [];\n  menu_type: string;\n\n  constructor(\n    private ticket_service: TicketService,\n    private activated_route: ActivatedRoute,\n    private router: Router,\n    private custom_fields_service: CustomFieldsService\n  ) {\n    router.events.subscribe((val) => {\n      if (val instanceof NavigationEnd) {\n        this.type = this.activated_route.snapshot.params.type;\n        this.type === 'active'\n          ? this.get_my_ticket()\n          : this.get_my_close_ticket();\n      }\n    });\n  }\n\n  get_my_ticket() {\n    this.ticket_service\n      .get_my_active_ticket(this.ticket_list.length)\n      .subscribe((res: any) => {\n        this.ticket_list = res.data;\n        console.log(this.ticket_list);\n        this.custom_feilds();\n      });\n  }\n\n  get_my_close_ticket() {\n    this.ticket_service\n      .get_my_close_ticket(this.ticket_list.length)\n      .subscribe((res: any) => {\n        this.ticket_list = res.data;\n        this.custom_feilds();\n      });\n  }\n\n  custom_feilds() {\n    this.custom_fields_service\n      .get_fields_for_tables(false)\n      .subscribe((res: any) => {\n        this.feilds = res.data;\n        this.spinner = false;\n      });\n  }\n\n  setMenu() {\n    this.items[0].items.push({\n      label: 'View',\n      icon: 'pi pi-eye',\n      command: () => {\n        this.menu_type = 'view';\n      },\n    });\n  }\n\n  update_menu(ticket) {\n    switch (this.menu_type) {\n      case 'view':\n        this.router.navigate(['/main/ticket-details', ticket._id]);\n        break;\n\n      default:\n        console.log('');\n    }\n  }\n\n  ngOnInit(): void {\n    this.setMenu();\n  }\n}\n","<section *ngIf=\"!spinner; else showspinner\">\n  <!-- Enabled Course -->\n  <div class=\"card\">\n    <div class=\"card-body\">\n      <div class=\"header\">\n        <h3 class=\"\">\n          <ng-container *ngIf=\"type === 'active'; else close\">\n            My Active Ticket List\n          </ng-container>\n          <ng-template #close>My Close Ticket List </ng-template>\n        </h3>\n\n        <div class=\"d-flex align-items-center\">\n          <button class=\"btn btn-primary\">\n            <a [routerLink]=\"['/main']\">\n              Raise Ticket <i class=\"fas fa-plus\"></i>\n            </a>\n          </button>\n        </div>\n      </div>\n\n      <div>\n        <p-table\n          #tickettable\n          [value]=\"ticket_list\"\n          dataKey=\"id\"\n          [rows]=\"10\"\n          [showCurrentPageReport]=\"true\"\n          [rowsPerPageOptions]=\"[10, 25, 50]\"\n          styleClass=\"p-datatable-customers\"\n          [paginator]=\"true\"\n          currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} entries\"\n          [globalFilterFields]=\"[\n            'heading',\n            '_id',\n            'priority.priority_name',\n            'category.category_name'\n          ]\"\n        >\n          <ng-template pTemplate=\"caption\" class=\"w-100\">\n            <div class=\"p-d-flex w-100\">\n              <span class=\"p-input-icon-left p-ml-auto w-100\">\n                <i class=\"pi pi-search\"></i>\n                <input\n                  pInputText\n                  type=\"text\"\n                  (input)=\"\n                    tickettable.filterGlobal($event.target.value, 'contains')\n                  \"\n                  placeholder=\"Search keyword\"\n                  class=\"w-100\"\n                />\n              </span>\n            </div>\n          </ng-template>\n          <ng-template pTemplate=\"header\">\n            <tr>\n              <th>Heading</th>\n              <th>Student</th>\n              <th>SME</th>\n              <th>Last Reply</th>\n              <th>Last Time Reply</th>\n              <th>Unread Message</th>\n              <th *ngFor=\"let field of feilds\">\n                {{ field.name }}\n              </th>\n              <th>Action</th>\n            </tr>\n          </ng-template>\n          <ng-template pTemplate=\"body\" let-ticket>\n            <tr>\n              <td>\n                <div>\n                  <small class=\"priority\">\n                    {{ ticket.priority.priority_name }}\n                  </small>\n                  <h6 class=\"h6 p-0 m-0\" style=\"margin-top: 0.1rem\">\n                    {{ ticket.heading }}\n                  </h6>\n                  <div>\n                    <small> {{ ticket.category.category_name }} </small> <br />\n                    <small class=\"d-block\" style=\"margin-top: -0.2rem\">\n                      {{ ticket.createdAt | date: \"medium\" }}\n                    </small>\n                  </div>\n                </div>\n              </td>\n              <td>{{ ticket.student.name }}</td>\n              <td>{{ ticket.sme.name }}</td>\n              <td>\n                <span *ngIf=\"ticket.comment.message.length > 0; else null\">{{\n                  ticket.comment.message[0].type\n                }}</span>\n                <ng-template #null>-</ng-template>\n              </td>\n              <td *ngIf=\"ticket.comment.message.length > 0; else null\">\n                {{ ticket.comment.message[0].createdAt | date: \"medium\" }}\n                <ng-template #null>-</ng-template>\n              </td>\n              <!-- <td>{{ ticket.createdAt | date: \"medium\" }}</td> -->\n              <td>{{ ticket.comment.admin_read }}</td>\n              <td *ngFor=\"let fie of feilds\">\n                <span *ngIf=\"ticket.hasOwnProperty(fie.name); else nodata\">\n                  {{ ticket[fie.name] }}\n                </span>\n                <ng-template #nodata> - </ng-template>\n              </td>\n              <td class=\"position-relative\">\n                <ng-container>\n                  <button\n                    pButton\n                    pRipple\n                    type=\"button\"\n                    icon=\"pi pi-ellipsis-h\"\n                    class=\"p-button-rounded p-button-text\"\n                    (click)=\"menu.toggle($event)\"\n                  ></button>\n\n                  <p-menu\n                    #menu\n                    [popup]=\"true\"\n                    [model]=\"items\"\n                    (click)=\"update_menu(ticket)\"\n                  ></p-menu>\n                </ng-container>\n\n                <!-- <ng-template #enable>\n                    <button\n                      pButton\n                      pRipple\n                      type=\"button\"\n                      icon=\"pi pi-pencil\"\n                      class=\"p-button-rounded p-button-text\"\n                      (click)=\"enable_subject(subject)\"\n                    ></button>\n                  </ng-template> -->\n              </td>\n            </tr>\n          </ng-template>\n          <ng-template pTemplate=\"emptymessage\">\n            <tr>\n              <td colspan=\"5\">No User found.</td>\n            </tr>\n          </ng-template>\n        </p-table>\n      </div>\n    </div>\n  </div>\n</section>\n\n<ng-template #showspinner>\n  <div class=\"spinner\">\n    <app-spinner></app-spinner>\n  </div>\n</ng-template>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MyTicketsRoutingModule } from './my-tickets-routing.module';\nimport { MyTicketsComponent } from '../../component/my-tickets/my-tickets.component';\nimport { PrimengModule } from 'src/app/SharedModule/primeng/primeng.module';\nimport { SharedUtilitiesModule } from 'src/app/SharedModule/shared-utilities/shared-utilities.module';\n\n@NgModule({\n  declarations: [MyTicketsComponent],\n  imports: [\n    CommonModule,\n    MyTicketsRoutingModule,\n    PrimengModule,\n    SharedUtilitiesModule,\n  ],\n})\nexport class MyTicketsModule {}\n"],"sourceRoot":"webpack:///"}